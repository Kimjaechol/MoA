# MoA (Master of AI) + KakaoTalk Cloud Deployment
# Copy this file to .env and fill in your values
#
# Setup guide: KAKAO-SETUP-GUIDE.md (한국어 상세 설정 가이드)

# ============================================
# LLM Provider (Required - at least one)
# ============================================

# Claude API Key (Recommended — fastest for Kakao 5s timeout)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxxx

# OpenAI API Key (Optional fallback)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Google Gemini API Key (Optional fallback)
# Get from: https://aistudio.google.com/apikey
GOOGLE_API_KEY=

# Groq API Key (Optional fallback — very fast inference)
# Get from: https://console.groq.com/
GROQ_API_KEY=

# ============================================
# Kakao API Credentials (Required)
# Get from: https://developers.kakao.com > 내 애플리케이션 > 앱 키
# See KAKAO-SETUP-GUIDE.md STEP 1
# ============================================

# Kakao REST API Key (필수)
# 카카오 디벨로퍼스 > 내 애플리케이션 > 앱 설정 > 앱 키 > REST API 키
KAKAO_ADMIN_KEY=your_rest_api_key_here

# Kakao JavaScript Key (선택)
# 카카오 디벨로퍼스 > 내 애플리케이션 > 앱 설정 > 앱 키 > JavaScript 키
KAKAO_APP_KEY=

# Kakao Channel ID (권장)
# 카카오톡 채널 관리자센터 (center-pf.kakao.com) > 관리 > 상세설정 > 채널 ID
# See KAKAO-SETUP-GUIDE.md STEP 2
KAKAO_CHANNEL_ID=

# ============================================
# AlimTalk / FriendTalk (선택 — 알림톡/친구톡)
# 사용자에게 먼저 메시지를 보내는 기능 (기기 연결 알림 등)
# See KAKAO-SETUP-GUIDE.md STEP 6
# ============================================

# Kakao Sender Key (발신 프로필 키)
# NHN Cloud 콘솔 > Notification > KakaoTalk Bizmessage > 발신 프로필 관리
# 플러스친구(@아이디) 등록 후 토큰 인증 완료 시 자동 발급
KAKAO_SENDER_KEY=

# NHN Cloud Toast App Key
# NHN Cloud 콘솔 > Notification > KakaoTalk Bizmessage > URL & Appkey > Appkey
TOAST_APP_KEY=

# NHN Cloud Toast Secret Key
# NHN Cloud 콘솔 > Notification > KakaoTalk Bizmessage > URL & Appkey > SecretKey
TOAST_SECRET_KEY=

# ============================================
# Webhook Configuration
# ============================================

# Port for webhook server (default: 8788)
KAKAO_WEBHOOK_PORT=8788

# Path for webhook endpoint (default: /kakao/webhook)
KAKAO_WEBHOOK_PATH=/kakao/webhook

# ============================================
# Development Tools (Optional)
# ============================================

# ngrok Auth Token for local development
# Get from: https://dashboard.ngrok.com/
NGROK_AUTHTOKEN=

# ============================================
# LawCall Configuration (Legal Consultation)
# ============================================

# Category URLs (JSON format)
# Simple format: {"민사":"url","형사":"url",...}
LAWCALL_ROUTES={"민사":"https://lawcall.com/civil","형사":"https://lawcall.com/criminal","이혼":"https://lawcall.com/family","세무":"https://lawcall.com/tax","행정":"https://lawcall.com/admin","헌법":"https://lawcall.com/constitutional","기본":"https://lawcall.com"}

# Lawyer name (displayed in responses)
LAWCALL_LAWYER_NAME=김재철 변호사

# Service name (displayed in responses)
LAWCALL_SERVICE_NAME=LawCall

# ============================================
# Supabase Database (Required for production)
# ============================================

# Get from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Optional: Use anon key for RLS-enabled queries
# SUPABASE_ANON_KEY=

# ============================================
# Billing & Credits Configuration
# ============================================

# Free credits for new users (default: 1000)
LAWCALL_FREE_CREDITS=1000

# Base URL for payment callbacks
LAWCALL_BASE_URL=https://lawcall.com

# Toss Payments (for credit purchases)
# Get from: https://developers.tosspayments.com/
TOSS_CLIENT_KEY=test_ck_xxxxxxxx
TOSS_SECRET_KEY=test_sk_xxxxxxxx

# Encryption key for API keys (32+ chars recommended)
# If not set, uses SUPABASE_SERVICE_KEY
LAWCALL_ENCRYPTION_KEY=

# Salt for user ID hashing (for privacy)
LAWCALL_USER_SALT=your-random-salt-here

# Default LLM model (affects pricing)
# Haiku is cheapest and fastest (recommended for Kakao 5s timeout)
# Options: claude-3-5-haiku-20241022, gpt-4o-mini, gemini-2.0-flash, llama-3.3-70b-versatile
MOA_MODEL=claude-3-5-haiku-20241022

# ============================================
# Owner Authentication (recommended for production)
# ============================================

# Admin master secret (enables owner-only mode for device control)
# Users authenticate via "사용자 인증" in KakaoTalk
MOA_OWNER_SECRET=

# Pre-configured owner IDs (format: "kakao:id1,telegram:id2")
MOA_OWNER_IDS=

# Data directory for auth state persistence (default: .moa-data)
MOA_DATA_DIR=

# ============================================
# Multi-Channel Support (선택)
# ============================================

# Telegram Bot Token (텔레그램 봇 연동)
# Get from: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=

# WhatsApp Cloud API (WhatsApp 연동)
# Get from: https://developers.facebook.com/
WHATSAPP_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_VERIFY_TOKEN=
WHATSAPP_APP_SECRET=

# Discord Bot Token (Discord 연동)
# Get from: https://discord.com/developers/applications
DISCORD_BOT_TOKEN=

# Slack Bot (Slack 연동)
# Get from: https://api.slack.com/apps > OAuth & Permissions
SLACK_BOT_TOKEN=
# Get from: https://api.slack.com/apps > Basic Information > Signing Secret
SLACK_SIGNING_SECRET=

# LINE Messaging API (LINE 연동)
# Get from: https://developers.line.biz/console/ > Messaging API
LINE_CHANNEL_ACCESS_TOKEN=
LINE_CHANNEL_SECRET=

# ============================================
# Advanced Configuration
# ============================================

# Gateway mode (local recommended for cloud)
MOA_GATEWAY_MODE=local

# Node environment
NODE_ENV=production

# Max response tokens (lower = faster response, important for Kakao 5s limit)
MOA_MAX_TOKENS=500

# Relay max devices per user (default: 5)
RELAY_MAX_DEVICES=5

# Encryption key for relay commands (32+ chars)
LAWCALL_ENCRYPTION_KEY=
